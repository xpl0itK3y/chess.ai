# Используем официальный образ Node.js для разработки
FROM node:18-alpine

# Устанавливаем рабочую директорию
WORKDIR /app

# Копируем package.json и package-lock.json для установки зависимостей
COPY package*.json ./

# Устанавливаем зависимости
RUN npm ci

# Копируем весь исходный код приложения
COPY . .

# Устанавливаем переменную окружения для корректной работы с OpenSSL
# Это нужно для совместимости с новыми версиями Node.js
ENV NODE_OPTIONS=--openssl-legacy-provider

# Открываем порт 3000 для приложения
EXPOSE 3000

# Запускаем приложение в режиме разработки
CMD ["npm", "start"]